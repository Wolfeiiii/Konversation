<html>
    <head>
        <title>Wolfeiii</title>
        <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 
        <link rel="stylesheet" href="stylesheets/style.css" /> 
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <script>
            var elements = {
                jokes: [],
                projects: [],
                stuff: [],
            };

            function getAnIdea() {
                function get(source) {
                    return source[Math.floor(Math.random() * source.length)];
                }
                return [get(elements.jokes), get(elements.projects), get(elements.stuff)].join(' ');
            }

            function brainstorm() {
                $("#idea").text(getAnIdea());
            }

            $(document).ready(function() {
                $('#shuffleBtn').click(brainstorm);

                $.ajax({
                    type: 'GET',
                    dataType: 'jsonp',
                    url: 'https://spreadsheets.google.com/feeds/list/1daAMFpRXyvAW9UrwgEIaa8T15SM7rCSJVVktRyX_vj/od6/public/values?alt=json-in-script&callback=dataCallback',
                    jsonpCallback: 'dataCallback',
                });

            });

            function dataCallback(data) {
                var rows = data.feed.entry;
                for (var i = 0; i < rows.length; i++) {
                    var jokes = rows[i].gsx$jokes.$t.trim();
                    var projects = rows[i].gsx$projects.$t.trim();
                    var stuff = rows[i].gsx$jokes.$t.trim();

                    if (jokes) elements.jokes.push(jokes);
                    if (projects) elements.projects.push(projects);
                    if (stuff) elements.stuff.push(stuff);
                }
                $('#shuffleBtn').show();
                brainstorm();
            }
        </script>
    </head>
    <body>
        <h1>Konversations Grejer</h1>

        <div id='idea'>Laddar idéer...</div>
        <a href='javascript:void(0)' class='btn' id='shuffleBtn' style='display:none'>Ge mig en till idé!</a>
    </body>
</html>
